import{r as a,i as n,h as e,H as t,e as o}from"./p-6bae5055.js";import"./p-32d9e078.js";import{D as i}from"./p-6bc4a9f7.js";const s=class{constructor(e){a(this,e),this.popover=n(this,"popover",7),this.alert=n(this,"alert",7),this.dataScreenList=[]}componentWillLoad(){this.getDataScreenListData()}async getDataScreenListData(){let a=await i.getDataScreenIdList();this.dataScreenList=await Promise.all(a.map(async a=>await i.getDataScreenOptionById(a)))}addNewCanvas(){this.history.push("/new")}jumpToCanvasEdit(a){this.history.push(`canvas/${a}/edit`)}jumpTOCanvasPreview(a){this.history.push(`canvas/${a}/preview`)}async removeCanvas(a){this.alert.emit({header:"删除",message:`确定要删除 ${a.name}？`,buttons:[{text:"取消",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"确定",handler:()=>{i.deleteDataScreen(a.id).then(()=>{this.getDataScreenListData()})}}]})}popoverThemeSelectBox(){this.popover.emit({component:"popover-theme"})}popoverCodeModify(a){this.popover.emit({component:"popover-code-modify",cssClass:"code-view-popover",componentProps:{dataScreenId:a,dismissCallBack:()=>{this.getDataScreenListData()}}})}handleDataSCreenChange(a,n,e){a[n]=e,this.dataScreenList=[...this.dataScreenList],i.setDataScreenOptionById(a.id,a)}render(){return e(t,{class:"ion-page"},e("ion-header",null,e("ion-toolbar",null,e("div",{slot:"start",class:"title"},e("img",{src:"../../assets/icon/icon-192.png"}),"  DataScreen"),e("ion-buttons",{slot:"end"},e("ion-button",{title:"导入",class:"header-btn",onClick:()=>{this.popoverCodeModify("")}},e("ion-icon",{slot:"icon-only",name:"code"})),e("ion-button",{title:"主题",class:"header-btn",onClick:()=>{this.popoverThemeSelectBox()}},e("ion-icon",{slot:"icon-only",name:"color-palette"}))))),e("ion-content",null,e("div",{class:"canvas-box"},e("ion-card",{button:!0,onClick:()=>{this.addNewCanvas()},class:"add-canvas"},e("div",{class:"add-card-content"},e("ion-icon",{name:"add"}),e("br",null),e("span",null,"新建可视化"))),this.dataScreenList.map(a=>e("ion-card",{onClick:()=>{this.jumpToCanvasEdit(a.id)}},e("div",{style:{"background-image":`url(${a.scaleImg||"../../assets/image/default-canvas.png"})`},class:"canvas-preivew"}),e("ion-card-content",null,e("ion-item",{onClick:a=>{a.stopPropagation(),a.preventDefault()},lines:"none"},e("ion-icon",{name:"create",slot:"start"}),e("ion-input",{debounce:800,onIonChange:n=>{this.handleDataSCreenChange(a,"name",n.detail.value)},value:a.name}),e("ion-buttons",{slot:"end"},e("ion-button",{color:"danger",onClick:()=>{this.removeCanvas(a)},title:"删除",fill:"outline"},e("ion-icon",{slot:"icon-only",name:"trash"})),e("ion-button",{onClick:()=>{this.popoverCodeModify(a.id)},title:"代码",fill:"outline"},e("ion-icon",{slot:"icon-only",name:"code"})),e("ion-button",{onClick:()=>{this.jumpTOCanvasPreview(a.id)},title:"预览",fill:"outline"},e("ion-icon",{slot:"icon-only",name:"easel"}))))))))))}get el(){return o(this)}};s.style="app-manage ion-toolbar{height:50px}app-manage .title{height:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;color:var(--ion-text-color);font-size:calc(2 * var(--font-size));padding-left:20px}app-manage .title img{width:40px}app-manage .canvas-box{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-line-pack:start;align-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;padding-top:8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:50px;padding-left:4px}app-manage .canvas-box ion-card{margin:16px;width:380px;height:281px;--color:var(--ion-text-color);--background:var(--ion-background-contrast)}app-manage .canvas-box ion-card ion-card-content{-webkit-padding-start:0;padding-inline-start:0;-webkit-padding-end:0;padding-inline-end:0}app-manage .canvas-box ion-card button{height:100%}app-manage .canvas-box ion-card .canvas-preivew{height:220px;background-size:contain;background-position:center center;background-repeat:no-repeat;-webkit-filter:grayscale(1);filter:grayscale(1)}app-manage .canvas-box .add-canvas{--color:var(--ion-background-contrast);--background:linear-gradient(-90deg, var(--ion-background-shade) 0, var(--ion-background-color) 100%);color:var(--color)}app-manage .canvas-box .add-canvas .add-card-content{height:100%;width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}app-manage .canvas-box .add-canvas .add-card-content ion-icon{width:45px;height:45px}app-manage .canvas-box .add-canvas .add-card-content span{font-size:calc(1.5 * var(--font-size))}";export{s as app_manage}