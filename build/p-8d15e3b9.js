import{D as a}from"./p-6bc4a9f7.js";var t=Object.getPrototypeOf,s={}.hasOwnProperty,n=s.toString,c=n.call(Object);const e=a=>{var e,i;return!(!a||"[object Object]"!==toString.call(a)||(e=t(a))&&("function"!=typeof(i=s.call(e,"constructor")&&e.constructor)||n.call(i)!==c))},i=(a,t)=>{var s,n,c,o,r,l=a,w=t;for(s in"object"!=typeof l&&("function"!=typeof(r=l)||"number"==typeof r.nodeType)&&(l={}),t)w=t[s],"__proto__"!==s&&l!==w&&(w&&(e(w)||(c=Array.isArray(w)))?(n=l[s],o=c&&!Array.isArray(n)?[]:c||e(n)?n:{},c=!1,l[s]=i(o,w)):void 0!==w&&(l[s]=w));return l};let o=new Map;const r=(a,t,s)=>{o.has(a)&&clearTimeout(o.get(a));let n=setTimeout(()=>{t(),o.delete(a)},s||500);o.set(a,n)};let l=[],w=null,y="",u="";const b=async(a,t,s=!0)=>{P(""),u=a,await C(t.componentsData,!0,!0,s),await A(t.canvasOption,s)},f=async t=>await a.getDataScreen(t);let p=null,j=null,m=null;const v=a=>{j=a},_=a=>{m=a},k=a=>{p=a},D=()=>j,O=()=>p,d=()=>m,g=()=>w,A=async(t,s=!0)=>(w=t,s&&await a.setDataScreenCanvasConfig(u,w),O()&&await p.setCanvasConfig(t),d()&&m.setCanvasConfig(t),w),C=async(t,s=!0,n=!0,c=!0)=>{l=i([],t),await Promise.all([s&&r("canvasDataCallback",async()=>{O()&&await p.mapComDatasToState(i([],l))}),n&&r("layerDataCallback",async()=>{let a=l.map(a=>a.id);D()&&await j.mapComIdsToState(a)})]),c&&a.setDataScreenComData(u,l)},T=()=>l,h=async(a,t=!0,s=!0)=>{let n=l.map(t=>t.id==a.id?a:t);await C(n,t,!1),s&&d()&&m.setComponentConfigData(a)},x=async a=>{await C(i([],[...l,a])),await P(a.id)},M=async a=>{a==y&&await P(""),await C(i([],l.filter(t=>a!==t.id)))},P=async a=>{y!==a&&(y=a,D()&&await j.chooseComponentById(a),O()&&await p.chooseComponentById(a),d()&&await m.setComponentConfigData(S(a)))},S=a=>l.filter(t=>t.id==a)[0]||null,q=(a,t,s=!0,n=!0,c=!0)=>{let e=l[a];l.splice(a,1),l.splice(t,0,e),C(l,s,n,c)};export{T as a,x as b,P as c,i as d,v as e,h as f,f as g,_ as h,k as i,A as j,g as k,M as r,b as s,q as u}