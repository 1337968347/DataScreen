var __awaiter=this&&this.__awaiter||function(n,e,t,a){function o(n){return n instanceof t?n:new t((function(e){e(n)}))}return new(t||(t=Promise))((function(t,i){function r(n){try{s(a.next(n))}catch(e){i(e)}}function c(n){try{s(a["throw"](n))}catch(e){i(e)}}function s(n){n.done?t(n.value):o(n.value).then(r,c)}s((a=a.apply(n,e||[])).next())}))};var __generator=this&&this.__generator||function(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,o,i,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(n){return function(e){return s([n,e])}}function s(r){if(a)throw new TypeError("Generator is already executing.");while(t)try{if(a=1,o&&(i=r[0]&2?o["return"]:r[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;if(o=0,i)r=[r[0]&2,i.value];switch(r[0]){case 0:case 1:i=r;break;case 4:t.label++;return{value:r[1],done:false};case 5:t.label++;o=r[1];r=[0];continue;case 7:r=t.ops.pop();t.trys.pop();continue;default:if(!(i=t.trys,i=i.length>0&&i[i.length-1])&&(r[0]===6||r[0]===2)){t=0;continue}if(r[0]===3&&(!i||r[1]>i[0]&&r[1]<i[3])){t.label=r[1];break}if(r[0]===6&&t.label<i[1]){t.label=i[1];i=r;break}if(i&&t.label<i[2]){t.label=i[2];t.ops.push(r);break}if(i[2])t.ops.pop();t.trys.pop();continue}r=e.call(n,t)}catch(c){r=[6,c];o=0}finally{a=i=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:true}}};var __spreadArrays=this&&this.__spreadArrays||function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var a=Array(n),o=0,e=0;e<t;e++)for(var i=arguments[e],r=0,c=i.length;r<c;r++,o++)a[o]=i[r];return a};System.register(["./p-7752e167.system.js","./p-d0797318.system.js","./p-47c6959b.system.js"],(function(n){"use strict";var e,t,a,o,i,r;return{setters:[function(n){e=n.r;t=n.i;a=n.h;o=n.H;i=n.e},function(){},function(n){r=n.D}],execute:function(){var c="app-manage ion-toolbar{height:50px}app-manage .title{height:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;color:var(--ion-text-color);font-size:calc(2 * var(--font-size));padding-left:20px}app-manage .title img{width:40px}app-manage .canvas-box{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-line-pack:start;align-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;padding-top:8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:50px;padding-left:4px}app-manage .canvas-box ion-card{margin:16px;width:380px;height:281px;--color:var(--ion-text-color);--background:var(--ion-background-contrast)}app-manage .canvas-box ion-card ion-card-content{-webkit-padding-start:0;padding-inline-start:0;-webkit-padding-end:0;padding-inline-end:0}app-manage .canvas-box ion-card button{height:100%}app-manage .canvas-box ion-card .canvas-preivew{height:220px;background-size:contain;background-position:center center;background-repeat:no-repeat;-webkit-filter:grayscale(1);filter:grayscale(1)}app-manage .canvas-box .add-canvas{--color:var(--ion-background-contrast);--background:linear-gradient(-90deg, var(--ion-background-shade) 0, var(--ion-background-color) 100%);color:var(--color)}app-manage .canvas-box .add-canvas .add-card-content{height:100%;width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}app-manage .canvas-box .add-canvas .add-card-content ion-icon{width:45px;height:45px}app-manage .canvas-box .add-canvas .add-card-content span{font-size:calc(1.5 * var(--font-size))}";var s=n("app_manage",function(){function n(n){e(this,n);this.popover=t(this,"popover",7);this.alert=t(this,"alert",7);this.dataScreenList=[]}n.prototype.componentWillLoad=function(){this.getDataScreenListData()};n.prototype.getDataScreenListData=function(){return __awaiter(this,void 0,void 0,(function(){var n,e;var t=this;return __generator(this,(function(a){switch(a.label){case 0:return[4,r.getDataScreenIdList()];case 1:n=a.sent();e=this;return[4,Promise.all(n.map((function(n){return __awaiter(t,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,r.getDataScreenOptionById(n)];case 1:return[2,e.sent()]}}))}))})))];case 2:e.dataScreenList=a.sent();return[2]}}))}))};n.prototype.addNewCanvas=function(){this.history.push("/new")};n.prototype.jumpToCanvasEdit=function(n){this.history.push("canvas/"+n+"/edit")};n.prototype.jumpTOCanvasPreview=function(n){this.history.push("canvas/"+n+"/preview")};n.prototype.removeCanvas=function(n){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){this.alert.emit({header:"删除",message:"确定要删除 "+n.name+"？",buttons:[{text:"取消",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"确定",handler:function(){r.deleteDataScreen(n.id).then((function(){e.getDataScreenListData()}))}}]});return[2]}))}))};n.prototype.popoverThemeSelectBox=function(){this.popover.emit({component:"popover-theme"})};n.prototype.popoverCodeModify=function(n){var e=this;this.popover.emit({component:"popover-code-modify",cssClass:"code-view-popover",componentProps:{dataScreenId:n,dismissCallBack:function(){e.getDataScreenListData()}}})};n.prototype.handleDataSCreenChange=function(n,e,t){n[e]=t;this.dataScreenList=__spreadArrays(this.dataScreenList);r.setDataScreenOptionById(n.id,n)};n.prototype.render=function(){var n=this;return a(o,{class:"ion-page"},a("ion-header",null,a("ion-toolbar",null,a("div",{slot:"start",class:"title"},a("img",{src:"../../assets/icon/icon-192.png"}),"  DataScreen"),a("ion-buttons",{slot:"end"},a("ion-button",{title:"导入",class:"header-btn",onClick:function(){n.popoverCodeModify("")}},a("ion-icon",{slot:"icon-only",name:"code"})),a("ion-button",{title:"主题",class:"header-btn",onClick:function(){n.popoverThemeSelectBox()}},a("ion-icon",{slot:"icon-only",name:"color-palette"}))))),a("ion-content",null,a("div",{class:"canvas-box"},a("ion-card",{button:true,onClick:function(){n.addNewCanvas()},class:"add-canvas"},a("div",{class:"add-card-content"},a("ion-icon",{name:"add"}),a("br",null),a("span",null,"新建可视化"))),this.dataScreenList.map((function(e){return a("ion-card",{onClick:function(){n.jumpToCanvasEdit(e.id)}},a("div",{style:{"background-image":"url("+(e.scaleImg||"../../assets/image/default-canvas.png")+")"},class:"canvas-preivew"}),a("ion-card-content",null,a("ion-item",{onClick:function(n){n.stopPropagation();n.preventDefault()},lines:"none"},a("ion-icon",{name:"create",slot:"start"}),a("ion-input",{debounce:800,onIonChange:function(t){n.handleDataSCreenChange(e,"name",t.detail.value)},value:e.name}),a("ion-buttons",{slot:"end"},a("ion-button",{color:"danger",onClick:function(){n.removeCanvas(e)},title:"删除",fill:"outline"},a("ion-icon",{slot:"icon-only",name:"trash"})),a("ion-button",{onClick:function(){n.popoverCodeModify(e.id)},title:"代码",fill:"outline"},a("ion-icon",{slot:"icon-only",name:"code"})),a("ion-button",{onClick:function(){n.jumpTOCanvasPreview(e.id)},title:"预览",fill:"outline"},a("ion-icon",{slot:"icon-only",name:"easel"}))))))})))))};Object.defineProperty(n.prototype,"el",{get:function(){return i(this)},enumerable:false,configurable:true});return n}());s.style=c}}}));